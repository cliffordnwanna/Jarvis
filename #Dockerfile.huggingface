FROM ghcr.io/open-webui/open-webui:main

# Hugging Face Spaces configuration
# Spaces run on port 7860 by default
ENV PORT=7860
ENV HOST=0.0.0.0

# These will be set via HF Spaces secrets
ENV WEBUI_SECRET_KEY=${WEBUI_SECRET_KEY}
ENV OPENAI_API_KEY=${OPENAI_API_KEY}

# Use OpenAI directly (or set OPENAI_API_BASE_URL to your LiteLLM instance)
ENV OPENAI_API_BASE_URL=${OPENAI_API_BASE_URL:-https://api.openai.com/v1}

# Enable signup for first user (becomes admin)
ENV ENABLE_SIGNUP=true

# Default model
ENV DEFAULT_MODELS=gpt-4o,gpt-4o-mini

# No VOLUME keyword - HF Spaces handles persistence automatically

EXPOSE 7860

CMD ["bash", "start.sh"]
